"use strict";var apiKey="563492ad6f91700001000001efe4554ec5924beab8b1c433b156ab30",findQuery=document.querySelector(".form__input"),findBtn=document.querySelector(".form__button"),gallery=document.querySelector(".gallery__wrapper");function loadImages(e){page+=1;var t="https://api.pexels.com/v1/search?query=".concat(e,"&per_page=18&page=").concat(page);return fetch(t,{headers:{Authorization:apiKey}}).then(function(e){if(e.ok)return e.json();throw new Error("error"+e.statusText)}).then(function(e){return e.photos}).catch(function(e){return console.log(e)})}function appendGallery(e){e.preventDefault();loadImages(findQuery.value).then(function(e){var t=imageMaker(e);gallery.innerHTML+=t})}function imageMaker(e){return e.reduce(function(e,t){return e+'<div class="img-list__imgs"> <img id='.concat(t.id," src=").concat(t.src.medium," \n    alt=").concat(t.photographer,' class="imgs__item"> </div>')},"")}(btnHidd=document.querySelector(".btn-hidden")).addEventListener("click",appendGallery);apiKey="563492ad6f91700001000001efe4554ec5924beab8b1c433b156ab30",findQuery=document.querySelector(".form__input"),findBtn=document.querySelector(".form__button"),gallery=document.querySelector(".gallery__wrapper");var btnHidd=document.querySelector(".btn-hidden"),page=1;function goApi(e){e.preventDefault();fetchImages(findQuery.value).then(function(e){var t=createImages(e);gallery.innerHTML=t,btnHidd.classList.remove("btn-hidden")})}function fetchImages(e){var t="https://api.pexels.com/v1/search?query=".concat(e,"&per_page=18&page=").concat(page);return fetch(t,{headers:{Authorization:apiKey}}).then(function(e){if(e.ok)return e.json();throw new Error("error"+e.statusText)}).then(function(e){return e.photos}).catch(function(e){return console.log(e)})}function createImages(e){return e.reduce(function(e,t){return e+' <div class="img-list__imgs"> <img id='.concat(t.id," src=").concat(t.src.medium," alt=").concat(t.photographer,' class="imgs__item"> </div>')},"")}findBtn.addEventListener("click",goApi);var favBtn=document.querySelector(".header__nav"),favList=document.querySelector(".fav-hidden"),container=document.querySelector(".favorites-gallery__img-list"),galleryList=document.querySelector(".gallery"),mk=0;function getFromLS(){for(var e in localStorage)if(0<=e){var t=document.createElement("div"),r=document.createElement("span"),n=document.createElement("img");n.addEventListener("click",openModal),t.classList.add("img-list__imgs"),r.classList.add("imgs__remove"),n.classList.add("imgs__item"),container.append(t),t.append(n),t.append(r);var a=localStorage.getItem(e);n.setAttribute("src",a)}}function addFav(e){var t=document.createElement("div"),r=document.createElement("img");for(var n in t.classList.add("img-list__imgs"),r.classList.add("imgs__item"),container.append(t),t.append(r),localStorage.setItem(e.id,e.src),localStorage)if(0<=n){var a=localStorage.getItem(e.id);r.setAttribute("src",a)}}function appGallery(e){favList.classList.remove("fav-hidden"),galleryList.classList.add("hide")}favBtn.addEventListener("click",appGallery),document.addEventListener("DOMContentLoaded",getFromLS);var index,getAttr,LOCALSTORAGE=function(e){if(e){return{isActive:"localStorage"in e,get:function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e)}},set:function(e,t){try{var r=JSON.stringify(t);localStorage.setItem(e,r)}catch(e){console.error("Set state error: ",e)}}}}}(window),modalSection=document.querySelector(".js-modal-backdrop"),modalClose=document.querySelector(".modal-close"),modalPrev=document.querySelector(".modal-prev"),modalNext=document.querySelector(".modal-next"),modalImg=document.querySelector(".modal-img"),modalFav=document.querySelector(".modal-favorite"),favorite=!1,favorites=document.querySelector(".favorites-gallery__img-list");function openModal(e){var t=e.target;choosePicture(t),modalNext.addEventListener("click",next),modalPrev.addEventListener("click",prev),choosePicture(t),modalSection.classList.remove("modal-hidden"),getAttr=t.getAttribute("src")}function hidd(e){this===e.target&&modalSection.classList.add("modal-hidden")}function choosePicture(e){return e.classList.contains("img-list__imgs")?(modalSection.classList.remove("modal-hidden"),modalImg.src=e.firstElementChild.src,modalImg.id=e.firstElementChild.id,index=e):e.classList.contains("imgs__item")?(modalSection.classList.remove("modal-hidden"),modalImg.src=e.src,modalImg.id=e.id,index=e.parentElement):void 0}function next(){var e=index.nextElementSibling.firstElementChild;index=index.nextElementSibling,modalImg.src=e.src,modalImg.id=e.id,localStorage.getItem()}function prev(){var e=index.previousElementSibling.firstElementChild;index=index.previousElementSibling,modalImg.src=e.src,modalImg.id=e.id}function handleWithFavorite(e){var t=e.target,r=modalImg;favorite?favorite&&(favorite=!1,t.style.color="rgb(255, 255, 255)",addFav(r)):(favorite=!0,t.style.color="rgb(255, 240, 108)",addFav(r))}gallery.addEventListener("click",openModal),modalSection.addEventListener("click",hidd),modalClose.addEventListener("click",hidd),modalFav.addEventListener("click",handleWithFavorite),modalNext.addEventListener("click",next);